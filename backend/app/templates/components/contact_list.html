<!-- Contact list fragment - used for HTMX pagination -->
<ul class="contact-list">
    {% for contact in contacts %}
    <li class="contact-item">
        <div>
            <a href="/contacts/{{ contact.id }}" class="contact-name">
                {{ contact.first_name }} {{ contact.last_name }}
            </a>
            {% if contact.latest_news %}
            <div class="contact-meta">{{ contact.latest_news[:80] }}{% if contact.latest_news|length > 80 %}...{% endif %}</div>
            {% endif %}
        </div>
    </li>
    {% endfor %}
</ul>

<!-- Pagination -->
{% if total_pages > 1 %}
<div class="pagination">
    {% if page > 1 %}
    <a
        hx-get="/ui/contacts/list?page={{ page - 1 }}"
        hx-target="#contact-container"
        hx-swap="innerHTML"
    >prev</a>
    {% endif %}

    {% for p in range(1, total_pages + 1) %}
        {% if p == page %}
        <span class="current">{{ p }}</span>
        {% else %}
        <a
            hx-get="/ui/contacts/list?page={{ p }}"
            hx-target="#contact-container"
            hx-swap="innerHTML"
        >{{ p }}</a>
        {% endif %}
    {% endfor %}

    {% if page < total_pages %}
    <a
        hx-get="/ui/contacts/list?page={{ page + 1 }}"
        hx-target="#contact-container"
        hx-swap="innerHTML"
    >next</a>
    {% endif %}
</div>
{% endif %}
